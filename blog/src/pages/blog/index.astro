---
import { getCollection } from "astro:content";
import "../../styles/global.css";

const posts = (await getCollection("blog")).filter(p => !p.data.draft)
  .sort((a,b)=> b.data.date.valueOf() - a.data.date.valueOf());
---
<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog — PAVIE | Advocacia</title>
  <meta name="description" content="Conteúdo jurídico com base legal e leitura agradável." />
  <link rel="canonical" href="https://www.pavieadvocacia.com.br/blog/" />
</head>
<body>
  <main class="wrap">
    <h1 class="h1">Blog PAVIE</h1>
    <p class="meta">Artigos práticos com linguagem clara, ética e em conformidade com a OAB e a LGPD.</p>
    <section class="grid" aria-label="Lista de artigos">
      {posts.length === 0 ? (
        <p>Nenhum artigo publicado ainda.</p>
      ) : (
        posts.map(p => (
          <article class="card">
            <h3><a href={`/blog/${p.slug}/`}>{p.data.title}</a></h3>
            <p>{p.data.description}</p>
            <small>{new Date(p.data.date).toLocaleDateString("pt-BR")}</small>
          </article>
        ))
      )}
    </section>
  </main>
</body>
</html>
